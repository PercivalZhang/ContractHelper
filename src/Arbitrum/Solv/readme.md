# 合约

## IOV Market
https://arbiscan.io/address/0x67D48Ce0E776147B0d996e1FaCC0FbAA91b1CBC4#readProxyContract

购买： Function: buy(uint24 offeringId_, uint128 units_)

参考交易：https://arbiscan.io/tx/0x880f60ad67cadfcfcc58f25fe8e83212457f60aa9ece53f3686a808f8bb2be63

## Bond NFT
https://arbiscan.io/address/0x32126ae067ec31974180f79b6313ae986a375faa#readProxyContract

获取用户BondNFT的数量：balanceOf(_user) 
获取用户指定下标对应的BondNFT Token Id：tokenOfOwnerByIndex(_user, _index)
获取BondNFT Token URI： tokenURI(_tokenId)

> 进行base64解码得到json个数的数据

.eg 用户：0xd0c417aab37c6b3acf93da6036bfe29963c5b3d9，TokenId：12 的NFT数据如下：

```JSON
{
  "name": "STRP Bond Voucher #12",
  "description": "⚠️ **Alert**: The price of the NFTs you're seeing on this page may be incorrect due to the failure of several third-party marketplaces to keep the numbers up to date. Please check the Voucher's correct pricing on the Solv dApp before buying or making an offer.\n\nConvertible Voucher #12 of STRP. Convertible Voucher is a structured product that can be converted into a predetermined number of tokens or stablecoins under certain conditions.\n\nAt maturity, the holders are paid the face value in stablecoins if the settlement price falls into the bond range. Otherwise, the Voucher will convert to an amount of tokens redeemable by the holder.\n\n- Voucher Address: 0x32126ae067ec31974180f79b6313ae986a375faa\n- Pool Address: 0xb037bf91b4b85bbe23d59fd182c20f2bde7e7ec9\n- Underlying Address: 0x326c33fd1113c1f29b35b4407f3d6312a8518431\n- Fund Currency Address: 0xff970a61a04b1ca14834a43f5de4533ebddb5cc8",
  "image": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwcHgiIGhlaWdodD0iNDAwcHgiIHZpZXdCb3g9IjAgMCA2MDAgNDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjAiIHkxPSI1MCUiIHgyPSIxMDAlIiB5Mj0iNTAlIiBpZD0ibGctMSI+PHN0b3Agc3RvcC1jb2xvcj0iIzAwQTRGRiIgb2Zmc2V0PSIwJSI+PC9zdG9wPjxzdG9wIHN0b3AtY29sb3I9IiNEOEY1NTUiIG9mZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSIwIiB5MT0iNTAlIiB4Mj0iMTAwJSIgeTI9IjUwJSIgaWQ9ImxnLTIiPjxzdG9wIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPjxzdG9wIHN0b3AtY29sb3I9IiMwMDAwMDAiIG9mZnNldD0iNDAlIj48L3N0b3A+PHN0b3Agc3RvcC1jb2xvcj0iIzAwMDAwMCIgb2Zmc2V0PSI1NSUiPjwvc3RvcD48c3RvcCBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSIwIiB5MT0iNTAlIiB4Mj0iMTAwJSIgeTI9IjUwJSIgaWQ9ImxnLTMiPjxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPjxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iNTAlIj48L3N0b3A+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iODIlIiB5MT0iMTglIiB4Mj0iMjUlIiB5Mj0iNjUlIiBpZD0ibGctNCI+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRkZGRiIgb2Zmc2V0PSIwJSI+PC9zdG9wPjxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjY1JSIgeTE9IjAiIHgyPSI0NSUiIHkyPSIxMDAlIiBpZD0ibGctNSI+PHN0b3Agc3RvcC1jb2xvcj0iI0JCQkJCQiIgb2Zmc2V0PSIwJSI+PC9zdG9wPjxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMTAwJSI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggaWQ9InRleHQtcGF0aC1hIiBkPSJNMzAgMTIgSDU3MCBBMTggMTggMCAwIDEgNTg4IDMwIFYzNzAgQTE4IDE4IDAgMCAxIDU3MCAzODggSDMwIEExOCAxOCAwIDAgMSAxMiAzNzAgVjMwIEExOCAxOCAwIDAgMSAzMCAxMiBaIi8+PC9kZWZzPjxnIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBmb250LWZhbWlseT0iQXJpYWwiPjxyZWN0IGZpbGw9InVybCgjbGctMSkiIHg9IjAiIHk9IjAiIHdpZHRoPSI2MDAiIGhlaWdodD0iNDAwIiByeD0iMjQiPjwvcmVjdD48cmVjdCBzdHJva2U9IiNGRkZGRkYiIHg9IjE2LjUiIHk9IjE2LjUiIHdpZHRoPSI1NjciIGhlaWdodD0iMzY3IiByeD0iMTYiPjwvcmVjdD48ZyB0ZXh0LXJlbmRlcmluZz0ib3B0aW1pemVTcGVlZCIgb3BhY2l0eT0iMC41IiBmb250LXNpemU9IjEwIiBmaWxsPSIjRkZGRkZGIj48dGV4dD48dGV4dFBhdGggc3RhcnRPZmZzZXQ9Ii0xMDAlIiB4bGluazpocmVmPSIjdGV4dC1wYXRoLWEiPkluIENyeXB0byBXZSBUcnVzdDxhbmltYXRlIGFkZGl0aXZlPSJzdW0iIGF0dHJpYnV0ZU5hbWU9InN0YXJ0T2Zmc2V0IiBmcm9tPSIwJSIgdG89IjEwMCUiIGJlZ2luPSIwcyIgZHVyPSIzMHMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC90ZXh0UGF0aD48L3RleHQ+PHRleHQ+PHRleHRQYXRoIHN0YXJ0T2Zmc2V0PSIwJSIgeGxpbms6aHJlZj0iI3RleHQtcGF0aC1hIj5JbiBDcnlwdG8gV2UgVHJ1c3Q8YW5pbWF0ZSBhZGRpdGl2ZT0ic3VtIiBhdHRyaWJ1dGVOYW1lPSJzdGFydE9mZnNldCIgZnJvbT0iMCUiIHRvPSIxMDAlIiBiZWdpbj0iMHMiIGR1cj0iMzBzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPjwvdGV4dFBhdGg+PC90ZXh0Pjx0ZXh0Pjx0ZXh0UGF0aCBzdGFydE9mZnNldD0iNTAlIiB4bGluazpocmVmPSIjdGV4dC1wYXRoLWEiPlBvd2VyZWQgYnkgU29sdiBQcm90b2NvbDxhbmltYXRlIGFkZGl0aXZlPSJzdW0iIGF0dHJpYnV0ZU5hbWU9InN0YXJ0T2Zmc2V0IiBmcm9tPSIwJSIgdG89IjEwMCUiIGJlZ2luPSIwcyIgZHVyPSIzMHMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC90ZXh0UGF0aD48L3RleHQ+PHRleHQ+PHRleHRQYXRoIHN0YXJ0T2Zmc2V0PSItNTAlIiB4bGluazpocmVmPSIjdGV4dC1wYXRoLWEiPlBvd2VyZWQgYnkgU29sdiBQcm90b2NvbDxhbmltYXRlIGFkZGl0aXZlPSJzdW0iIGF0dHJpYnV0ZU5hbWU9InN0YXJ0T2Zmc2V0IiBmcm9tPSIwJSIgdG89IjEwMCUiIGJlZ2luPSIwcyIgZHVyPSIzMHMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC90ZXh0UGF0aD48L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQwLCA5MikiPjxwYXRoIGQ9Ik0wLDEyNyBDMCwxMjcgMCwxMjcgMCwxMjcgTDI2MCwxMjggTDI2MCwxMjggTDQ2Nyw3IiBzdHJva2U9InVybCgjbGctMikiIHN0cm9rZS13aWR0aD0iMjAiIG9wYWNpdHk9IjAuMSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48L3BhdGg+PHBvbHlsaW5lIHN0cm9rZT0idXJsKCNsZy0zKSIgc3Ryb2tlLXdpZHRoPSI2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHBvaW50cz0iNDcgMTI3IDI2MCAxMjcgNDc5IDAiPjwvcG9seWxpbmU+PHBhdGggZD0iTTQxMy4zLDEyLjUgTDM5NywzNCBDMzg1LDE5IDM4NSwxOSAzODUsMTkgTDQxMSw5LjUgQzQxMiw5IDQxNC41LDkuNSA0MTMuNSwxMiBaIiBmaWxsPSJ1cmwoI2xnLTQpIiB0cmFuc2Zvcm09InJvdGF0ZSgtMzU2KSI+PC9wYXRoPjxjaXJjbGUgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjQiIGZpbGw9IiMzQ0JGNDUiIGN4PSIyNjAiIGN5PSIxMjcuNSIgcj0iNyI+PC9jaXJjbGU+PC9nPjx0ZXh0IGZvbnQtc2l6ZT0iMzIiIGZpbGw9IiNGRkZGRkYiPjx0c3BhbiB4PSI0MCIgeT0iNjUiIGZvbnQtc2l6ZT0iMjUiPlNUUlAgQm9uZCBWb3VjaGVyPC90c3Bhbj48dHNwYW4geD0iNDAiIHk9IjEwNSI+NTAsNjMxLjAyPHRzcGFuIGZvbnQtc2l6ZT0iMjQiPiBVU0RDPC90c3Bhbj48L3RzcGFuPjx0c3BhbiB4PSI0OTAiIHk9IjY5Ij4jIDEyPC90c3Bhbj48L3RleHQ+PHRleHQgZm9udC1zaXplPSIxMiIgZmlsbD0iI0ZGRkZGRiI+PHRzcGFuIHg9IjQwIiB5PSIzNDUiPk1hdHVyaXR5IERhdGU6IDIwMjIvMDcvMTE8L3RzcGFuPjwvdGV4dD48cGF0aCBkPSJNMzMwLDI4MCBMNTUwLDI4MCBDNTU1LDI4MCA1NjAsMjg0IDU2MCwyOTAgTDU2MCwzNDAgQzU2MCwzNDUgNTU1LDM1MCA1NTAsMzUwIEwzMzAsMzUwIEMzMjQsMzUwIDMyMCwzNDUgMzIwLDM0MCBMMzIwLDI5MCBDMzIwLDI4NCAzMjQsMjgwIDMzMCwyODAgWiIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iMC4yIj48L3BhdGg+PGNpcmNsZSBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0iIzNDQkY0NSIgY3g9IjM0MiIgY3k9IjMwNCIgcj0iNSI+PC9jaXJjbGU+PHRleHQgZm9udC1zaXplPSIxNCIgZmlsbD0iI0ZGRkZGRiI+PHRzcGFuIHg9IjM1NyIgeT0iMzA5Ij5Db252ZXJzaW9uIHByaWNlOiA8L3RzcGFuPjx0c3BhbiB4PSI0NzUiIHk9IjMwOSI+JDMuMDA8L3RzcGFuPjx0c3BhbiB4PSIzNTciIHk9IjMzMSI+Q29udmVydGlibGU6IDwvdHNwYW4+PHRzcGFuIHg9IjQ0MCIgeT0iMzMxIj4xNiw4NzcuMDAgU1RSUDwvdHNwYW4+PC90ZXh0PjwvZz48L3N2Zz4=",
  "units": "5063102328548256778183346097972",
  "slot": "7449454373487682019936109982845132534049663352949151328257453103866715670317",
  "properties": {
    "underlyingToken": "0x326c33fd1113c1f29b35b4407f3d6312a8518431",
    "fundCurrency": "0xff970a61a04b1ca14834a43f5de4533ebddb5cc8",
    "issuer": "0x0a5624cf7afb304dc7b273f168097ea3daeb232a",
    "totalValue": "1,901,695.26",
    "bondWarrant": "https://wzvsamg5o4uaubcsecuqxg4tzhabkukue5srxhmeinopj2u6m5oa.arweave.net/tmsgMN13KAoEUiCpC5uTycAVUVQnZRudhENc9OqeZ1w",
    "highestPrice": "3.00",
    "lowestPrice": "1.10",
    "settlePrice": "0.00",
    "effectiveTime": "2022/04/11 00:00:00",
    "maturity": "2022/07/11 00:00:00"
  }
}
```
> 关键数据说明：
- maturity: 到期结算日子
- units: 按照FundCurrency（USDC）计算的价值， decimals：1e26
- conversion price = highestPrice
- convertable underlying tokens(underlyingToken): units / highestPrice
- image：NFT visible image（SVL/Image），拷贝至浏览器，预览效果
- bondWarrent：债券凭证，一个债券凭证保险和赎回的声明文档，存贮在去中心化网络arweave上，复制到浏览器，就可以查看
- issuer： 多签资金账户

## 资金流向
多签账户0x0a5624cf7afb304dc7b273f168097ea3daeb232a,将操作用户资金usdc将跟Strips Treasury的token - STRP配对，添加LP到Sushi的LP： 0x01dE11cfD3A7261A954db411f02C86D8b826e5d2，然后LP Token将被质押到如下四个地址上：
- ftx market: 0x0CfB5ccC02E42F6C485AE826de1C42B3C16eafa8
- binance market: 0x594C8612562f7578c3d45bf022c3b7f2154f3a2E
- aave market: 0x9D8Afe7e5093f56D7929ab8Fc1A3A912343E5Ccc
- insurance: 0x5D623170f81E485e43841881F07B69e968CFf55a
